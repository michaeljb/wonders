<!DOCTYPE html>
<html lang="en">
  <body>
    <% ["/bootstrap-3.3.2-dist/css/bootstrap-theme.css",
        "/bootstrap-3.3.2-dist/css/bootstrap.css",
        "/bootstrap-select-1.6.3-dist/css/bootstrap-select.css",
        "/bootstrap-switch.css",
        "/bootstrap-datepicker.css"
    ].each do |css| %>
    <link rel="stylesheet" href="<%= css %>">
    <% end %>

    <% ["/jquery-2.1.3.min.js",
        "/bootstrap-3.3.2-dist/js/bootstrap.js",
        "/bootstrap-select-1.6.3-dist/js/bootstrap-select.min.js",
        "/bootstrap-switch.js",
        "/bootstrap-datepicker.js"
    ].each do |js| %>
    <script src="<%= js %>"></script>
    <% end %>


    <%= @title %><br><br>


    players: <%= (@players || []).map { |p| p.name }.join(' ')%><br><br>

    boards: <%=(@boards || []).map { |b| "#{b.name} #{b.side}" }.join(' ') %><br><br>


    <br>

    <a href="/games/add">Add a game</a>

    <% (2..8).each do |n| %>
      <div class=<%= n %>player">
        <table class="table table-bordered table-hover">
          <thead>
            <th class="text-center"><%= n %> Players</th>

            <th>Games Played</th>
            <th>Average Rank</th>

            <% ((2..(2 * n)).map { |m| m / 2.0}).each do |_n| %>
              <th><%= _n %></th>
            <% end %>

          </thead>

          <tbody>
            <% @standings[n].each do |s| %>
              <tr>
                <td><%= Player.find(s[:player]).name %></td>
                <td><%= s[:games_played] %></td>
                <td><%= s[:ranking_avg].round(2) %></td>

                <% Standings3P.column_names.select { |c| c =~ /^[0-9]/ }.each do |_n| %>
                  <td><%= s[_n] %></td>
                <% end %>
              </tr>
            <% end %>
          </tbody>
        </table>

      </div>
    <% end %>


  </body>
</html>
